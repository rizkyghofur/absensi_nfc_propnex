<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com;"
    />
    <title>NFC Attendance - PropNex</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Titlebar drag region -->
    <div class="titlebar">
      <div class="titlebar-text">NFC Attendance System</div>
    </div>

    <div class="app-container">
      <!-- Header -->
      <header class="header">
        <div class="logo">
          <div class="logo-icon">
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
              <rect width="32" height="32" rx="8" fill="url(#logoGrad)" />
              <path
                d="M8 16C8 11.582 11.582 8 16 8C20.418 8 24 11.582 24 16"
                stroke="white"
                stroke-width="2"
                stroke-linecap="round"
              />
              <path
                d="M11 16C11 13.239 13.239 11 16 11C18.761 11 21 13.239 21 16"
                stroke="white"
                stroke-width="2"
                stroke-linecap="round"
              />
              <circle cx="16" cy="16" r="2" fill="white" />
              <path
                d="M16 18V24"
                stroke="white"
                stroke-width="2"
                stroke-linecap="round"
              />
              <defs>
                <linearGradient id="logoGrad" x1="0" y1="0" x2="32" y2="32">
                  <stop stop-color="#6366f1" />
                  <stop offset="1" stop-color="#8b5cf6" />
                </linearGradient>
              </defs>
            </svg>
          </div>
          <div class="logo-text">
            <h1>PropNex NFC</h1>
            <span class="subtitle">Attendance System</span>
          </div>
        </div>
        <div class="reader-status" id="readerStatus">
          <div class="status-dot disconnected" id="statusDot"></div>
          <span id="statusText">Menunggu Reader...</span>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main-content">
        <!-- NFC Scan Area -->
        <div class="scan-section">
          <div class="scan-card" id="scanCard">
            <div class="scan-rings" id="scanRings">
              <div class="ring ring-1"></div>
              <div class="ring ring-2"></div>
              <div class="ring ring-3"></div>
            </div>
            <div class="scan-icon" id="scanIcon">
              <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                <path
                  d="M12 32C12 20.954 20.954 12 32 12C43.046 12 52 20.954 52 32"
                  stroke="currentColor"
                  stroke-width="3"
                  stroke-linecap="round"
                  opacity="0.3"
                />
                <path
                  d="M18 32C18 24.268 24.268 18 32 18C39.732 18 46 24.268 46 32"
                  stroke="currentColor"
                  stroke-width="3"
                  stroke-linecap="round"
                  opacity="0.5"
                />
                <path
                  d="M24 32C24 27.582 27.582 24 32 24C36.418 24 40 27.582 40 32"
                  stroke="currentColor"
                  stroke-width="3"
                  stroke-linecap="round"
                  opacity="0.7"
                />
                <circle cx="32" cy="32" r="4" fill="currentColor" />
                <path
                  d="M32 36V52"
                  stroke="currentColor"
                  stroke-width="3"
                  stroke-linecap="round"
                />
              </svg>
            </div>
            <div class="scan-text" id="scanText">
              <h2>Tempelkan Kartu NFC</h2>
              <p>Dekatkan kartu ke reader ACR122U</p>
            </div>
          </div>

          <!-- Card Info Display -->
          <div class="card-info hidden" id="cardInfo">
            <div class="card-info-header">
              <div class="card-info-icon">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <rect x="2" y="5" width="20" height="14" rx="2" />
                  <path d="M2 10h20" />
                </svg>
              </div>
              <h3>Kartu Terdeteksi</h3>
            </div>
            <div class="card-info-grid">
              <div class="info-item">
                <label>UID</label>
                <span id="cardUID" class="info-value uid">-</span>
              </div>
              <div class="info-item">
                <label>Waktu Scan</label>
                <span id="cardTime" class="info-value">-</span>
              </div>
            </div>

            <!-- NDEF Records -->
            <div class="ndef-records hidden" id="ndefRecords">
              <div class="ndef-divider"></div>
              <!-- vCard Display -->
              <div class="vcard-display hidden" id="vcardDisplay">
                <div class="vcard-header">
                  <div class="vcard-avatar" id="vcardAvatar">?</div>
                  <div class="vcard-name-info">
                    <h4 id="vcardName">-</h4>
                    <span class="vcard-org" id="vcardOrg">-</span>
                  </div>
                </div>
                <div class="vcard-fields">
                  <div class="vcard-field hidden" id="vcardPhoneRow">
                    <span class="vcard-field-icon">üì±</span>
                    <div class="vcard-field-content">
                      <label>Telepon</label>
                      <span id="vcardPhone">-</span>
                    </div>
                  </div>
                  <div class="vcard-field hidden" id="vcardEmailRow">
                    <span class="vcard-field-icon">‚úâÔ∏è</span>
                    <div class="vcard-field-content">
                      <label>Email</label>
                      <span id="vcardEmail">-</span>
                    </div>
                  </div>
                  <div class="vcard-field hidden" id="vcardUrlRow">
                    <span class="vcard-field-icon">üîó</span>
                    <div class="vcard-field-content">
                      <label>Website</label>
                      <span id="vcardUrl">-</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- URI Record Display -->
              <div class="uri-display hidden" id="uriDisplay">
                <div class="uri-row">
                  <span class="uri-icon">üîó</span>
                  <div class="uri-content">
                    <label>URL</label>
                    <span id="uriValue" class="info-value">-</span>
                  </div>
                </div>
              </div>

              <!-- Text Record Display -->
              <div class="text-display hidden" id="textDisplay">
                <div class="text-row">
                  <span class="text-icon">üìù</span>
                  <div class="text-content">
                    <label>Text Data</label>
                    <span id="textValue" class="info-value">-</span>
                  </div>
                </div>
              </div>

              <!-- Raw/Unknown Record Display -->
              <div class="raw-display hidden" id="rawDisplay">
                <div class="text-row">
                  <span class="text-icon">üìÑ</span>
                  <div class="text-content">
                    <label>Raw Data</label>
                    <span id="rawValue" class="info-value">-</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Scan History -->
        <div class="history-section">
          <div class="history-header">
            <h3>
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="12" cy="12" r="10" />
                <polyline points="12,6 12,12 16,14" />
              </svg>
              Riwayat Scan
            </h3>
            <button class="btn-clear" id="btnClear" title="Bersihkan riwayat">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="3,6 5,6 21,6" />
                <path
                  d="M19,6v14a2,2,0,0,1-2,2H7a2,2,0,0,1-2-2V6m3,0V4a2,2,0,0,1,2-2h4a2,2,0,0,1,2,2V6"
                />
              </svg>
              Hapus
            </button>
          </div>
          <div class="history-list" id="historyList">
            <div class="history-empty" id="historyEmpty">
              <svg
                width="48"
                height="48"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1"
                opacity="0.3"
              >
                <rect x="2" y="3" width="20" height="18" rx="2" />
                <path d="M8 7h8M8 11h5" />
              </svg>
              <p>Belum ada kartu yang di-scan</p>
            </div>
          </div>
        </div>
      </main>

      <!-- Error Toast -->
      <div class="toast hidden" id="errorToast">
        <div class="toast-icon">‚ö†Ô∏è</div>
        <span id="errorText">Error message</span>
      </div>
    </div>

    <script src="renderer.js"></script>
  </body>
</html>
